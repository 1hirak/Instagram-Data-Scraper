function fnExcelReport(t){var e=document.getElementById(t),n="<table border='2px'>";for(j=0;j<1;j++)n+="<tr bgcolor='#87AFC6'>"+e.rows[j].innerHTML+"</tr>";for(j=1;j<e.rows.length;j++)n+="<tr>"+e.rows[j].innerHTML+"</tr>";return n+="</table>",n=n.replace(/<A[^>]*>|<\/A>/g,""),n=n.replace(/<img[^>]*>/gi,""),n=n.replace(/<input[^>]*>|<\/input>/gi,""),"data:application/vnd.ms-excel, "+encodeURIComponent(n)}$=jQuery;var $document=$(document),$loading=$("#indicator").hide(),$btns=$("button"),$btnAddMore=$(".add-more"),$btnStartNow=$("#fetch-insta-btn"),$btnDeleteNow=$(".remove"),$btnStartDemo=$("#startDemo"),$coneNewurlent=$(".clone").html(),$coneurlentWrapper=$(".row.extra"),$topNavigeationBar=$(".nav.navbar-nav .label-success"),$inputSelectCheckbox=$(".checkbox-toggle"),$btnTableDel=$("#tbl-del-row"),$tblReferesh=$("#tbl-refresh"),$btnExportExcel=$("#btnExport"),$loadingContainer=$(".progress-bar"),$modelTitle=$(".modal-title"),$form=$("form"),totalRequestUrl=0,currentMasterIndex=1,currentMasterProgress=0,logInfo=!1,log_message=function(t){!0===logInfo&&console.log(t)},stateProgress=function(){log_message("currentMasterIndex: "+currentMasterIndex),log_message("currentMasterProgress: "+currentMasterProgress),$loadingContainer.attr({"aria-valuenow":currentMasterProgress}).attr("style","width:"+currentMasterProgress+"%").html("&nbsp;&nbsp;&nbsp;Process Completed "+currentMasterProgress+"%, Now fetching comments & likes")},Instagram=function(){this.stateError=!1,this.txtProgressState=0,this.info=[],this.urlInstagram="https://www.instagram.com",this.urlInstagramNext=null,this.InstagramJSON=null,this.currentIndex=0,this.currentIndexPost=0,this.isSearchingForNext=!1,this.errorContainer=$(".user-error"),this.infoContainer=$(".user-info"),this.tableWrapper=$(".table-data"),this.tableContentWrapper=$(".table.table-hover.table-striped tbody"),this.scriptContainer=$("#X-Parser"),this.txtIndicator=$(".txt-progress"),this.sendRequestUrl=$is_htaccess_enable?"Instagram/fetch_data":"Services/AjaxServices.php"};Instagram.prototype.setAccount=function(){!1===this.isSearchingForNext&&(this.info=[],this.info.Biography=this.InstagramJSON.user.biography,this.info.UserName=this.InstagramJSON.user.username,this.info.FullName=this.InstagramJSON.user.full_name,this.info.Posts=this.InstagramJSON.user.media.count,this.info.Followers=this.InstagramJSON.user.followed_by.count,this.info.Following=this.InstagramJSON.user.follows.count,this.info.AccountHref=this.urlInstagram+"/"+this.InstagramJSON.user.username);var t=Math.ceil(this.info.Posts/12);this.eventHandler("Likes & Comments: "+this.currentIndexPost+"/"+t+", "+this.info.FullName),this.txtProgressState=Math.ceil(100*this.currentIndexPost)/t;var e=this.InstagramJSON.user.media.nodes,n=[],r=[],s=[],i=0,o=0,a=0;$.each(e,function(t,e){n.push(e.likes.count),r.push(e.comments.count),s.push(e.video_views?e.video_views:0)}),$.each(n,function(){i+=parseInt(this)||0}),$.each(r,function(){o+=parseInt(this)||0}),$.each(s,function(){a+=parseInt(this)||0}),!1===this.isSearchingForNext?(this.info.TotalLikes=i,this.info.TotalComments=o,this.info.TotalViews=a):(this.info.TotalLikes=parseInt(this.info.TotalLikes)+i,this.info.TotalComments=parseInt(this.info.TotalComments)+o,this.info.TotalViews=parseInt(this.info.TotalViews)+a),!0===this.InstagramJSON.user.media.page_info.has_next_page?(this.urlInstagramNext=this.urlInstagram+"/"+this.info.UserName+"/?max_id="+e[e.length-1].id,this.currentIndexPost+=1,this.isSearchingForNext=!0):(this.currentIndexPost=1,this.isSearchingForNext=!1)},Instagram.prototype.buildViews=function(){var t="";return t+='<tr class="info-row">',t+='<td><input class="tbl-chk" type="checkbox"></td>',t+="<td>"+this.info.AccountHref+"</td>",t+="<td>"+this.info.UserName+"</td>",t+="<td>"+this.info.Biography+"</td>",t+="<td>"+this.info.Followers+"</td>",t+="<td>"+this.info.Following+"</td>",t+="<td>"+this.info.Posts+"</td>",t+="<td>"+this.info.TotalLikes+"</td>",t+="<td>"+this.info.TotalComments+"</td>",t+="<td>"+this.info.TotalViews+"</td>",t+="</tr>"},Instagram.prototype.errorHandler=function(t){this.errorContainer.html(t)},Instagram.prototype.eventHandler=function(t,e){void 0===e?(this.txtIndicator.eq(this.currentIndex).css({width:this.txtProgressState+"%","border-top":"2px solid green"}),this.infoContainer.eq(this.currentIndex).html(t)):(this.txtIndicator.eq(this.currentIndex).css({width:this.txtProgressState+"%","border-top":"2px solid red"}),this.infoContainer.eq(this.currentIndex).addClass(e).html(t))},Instagram.prototype.getAccount=function(){},Instagram.prototype.initNow=function(link){var $this=this;return $.post($this.sendRequestUrl,{iUrl:link},function(data,textStatus,xhr){if($this.scriptContainer.html(data),eval($this.scriptContainer.html()),window._sharedData.error)return $this.stateError=!0,$this.errorHandler(window._sharedData.error),!1;if($this.InstagramJSON=window._sharedData.entry_data.ProfilePage.shift(),$this.stateError=!1,$this.setAccount(),!0===$this.isSearchingForNext)$this.initNow($this.urlInstagramNext);else{currentMasterIndex++;var done_so_far=Math.floor(currentMasterIndex/totalRequestUrl*100);$this.isSearchingForNext=!1,$this.currentIndexPost=1,$this.txtProgressState=0,$this.eventHandler("Likes & Comments Done..."+$this.info.FullName),log_message("Current Index "+$this.currentIndex),log_message("totalRequestUrl "+totalRequestUrl),log_message("Current% "+done_so_far),currentMasterProgress=done_so_far,stateProgress(),$this.tableContentWrapper.append($this.buildViews())}})},$(document).ready(function(){function t(){var t=window.pageYOffset;0<t?e.add():0==t&&e.remove()}var e={flagAdd:!0,elements:[],init:function(t){this.elements=t},add:function(){if(this.flagAdd){for(var t=0;t<this.elements.length;t++)document.getElementById(this.elements[t]).className+=" fixed-theme";this.flagAdd=!1}},remove:function(){for(var t=0;t<this.elements.length;t++)document.getElementById(this.elements[t]).className=document.getElementById(this.elements[t]).className.replace(/(?:^|\s)fixed-theme(?!\S)/g,"");this.flagAdd=!0}};e.init(["top_nav"]),window.onscroll=function(e){t()},t(),$(document).ajaxStart(function(){$loading.show(),$btns.prop("disabled",!0),$tblReferesh.addClass("faa-spin animated"),$modelTitle.html("We are working so hard, don't break the chain..."),$(".label-success").removeClass("label-success").addClass("label-info")}).ajaxStop(function(){$loading.hide(),$btns.prop("disabled",!1),$tblReferesh.removeClass("faa-spin animated"),$modelTitle.html("Enter Instagram account url:"),$(".label-info").removeClass("label-info").addClass("label-success")});var n=function(){$topNavigeationBar.html($(".insta-url:visible").length)};n(),$inputSelectCheckbox.bind("click",function(){var t=$(this).find("i");t.hasClass("glyphicon-unchecked")?(t.removeClass("glyphicon-unchecked").addClass("glyphicon-check"),$(".tbl-chk").prop("checked",!0)):(t.removeClass("glyphicon-check").addClass("glyphicon-unchecked"),$(".tbl-chk").prop("checked",!1))}),$btnExportExcel.click(function(t){var e=fnExcelReport("export-report");$(this).attr("download","ExcelExport.xls").attr("href",e).attr("target","_blank")}),$btnStartDemo.bind("click",function(t){t.preventDefault(),alert("Now you can click on [Get Info] button to see, How this works.."),window.location.href=window.location.protocol+"//"+window.location.host+window.location.pathname+"?start_demo=1"}),$btnAddMore.bind("click",function(t){t.preventDefault(),$($coneNewurlent).appendTo($coneurlentWrapper),n()}),$btnDeleteNow.bind("click",function(t){t.preventDefault(),$form.find("input:checkbox.chk-input:checked").parents(".col-md-4").remove(),n()}),$btnStartNow.bind("click",function(t){t.preventDefault(),totalRequestUrl=$("input[name='iUrl[]']:visible").length,$topNavigeationBar.html($(".insta-url:visible").length);$("input[name='iUrl[]']:visible").map(function(t){var e=new Instagram;e.currentIndex=t,e.eventHandler("Getting data, please wait...."),e.initNow($(this).val()).done(function(t){e.stateError&&(e.currentIndexPost=1,e.eventHandler("Error in Instagram profile link, wrong link","label-danger"))})})}),$btnTableDel.bind("click",function(){alert("Uh! You are bad, Why you hit me :(")})});